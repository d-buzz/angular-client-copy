<main>
  <div id="allnotif">
   
    <div class="list-group rounded-circle">
      
      <div class="alert alert-success text-center mb-0" role="alert" *ngIf="!hide_alert">
        <strong>Well done!</strong> You successfully clear all your important messages.
      </div>
      <div class="list" *ngFor="let notif of notifs;let i=index;">
        
        <!--Notification for Recent Postings-->
        <a (click)="markAsRead(notif)"
          class="list-group-item list-group-item-action flex-column align-items-start {{ notif.is_read==0 ? 'unread' : ''}}"
          *ngIf="notif.type=='recent_tweet'">
          
          <div class="notif-item">
            <span class="avatar avatar-sm rounded-circle align-items-center">
              <a>
                <img alt="Image placeholder" src="{{ notif.sender_metadata.author_profile_pic }}"
                  onError="this.src='assets/avatars/AVATAR.svg'" width="40" height="40" />
              </a>
            </span>
            <div class="media-body">
              <span class="recent-say">Recent Tweet from</span>
              <span class="username font-weight-bold"
                [routerLink]="['/profile/','@'+notif.sender]">{{ notif.sender_metadata.author_name | lettercase:'ucfirst' }}</span>
            </div>
            <div class="section-blog-list content-holder">
              <div class="media align-items-center">
                <div class="media-body text-wrap mt-2">
                  <p class="mb-1 content" [innerHTML]="notif.content?.body | stripHTML"></p>
                  <br />
                  <span class="timestamp_hours" data-toggle="tooltip" data-placement="top"
                    title="{{ notif.created }}"><small class="timeago"> {{ notif.date | timeago:live }}</small></span>
                </div>
              </div>
            </div>
          </div>
        </a>
        <!--Notification for Follow/Unfollow-->
        <a (click)="markAsRead(notif)"
          class="list-group-item list-group-item-action flex-column align-items-start {{ notif.is_read==0 ? 'unread' : ''}}"
          *ngIf="notif.type=='follow'">
          <div class="notif-item">
            <span class="avatar avatar-sm rounded-circle align-items-center">
              <a>
                <img alt="Image placeholder" src="{{ notif.sender_metadata.author_profile_pic }}"
                  onError="this.src='assets/avatars/AVATAR.svg'" width="40" height="40" />
              </a>
            </span>
            <div class="media-body">
              <span class="username font-weight-bold"
                [routerLink]="['/profile/','@'+notif.sender]">{{ notif.sender_metadata.author_name | lettercase:'ucfirst' }}</span>
              <span class="recent-say"> follows you</span>
              <br />
              <span class="timestamp_hours" data-toggle="tooltip" data-placement="top" title="{{ notif.created }}">
                <i class="fa fa-user-plus"></i>
                <small class="timeago"> {{ notif.date | timeago:live }}</small></span>
            </div>
          </div>
        </a>

        <!--Notification for Resteem-->
        <a (click)="markAsRead(notif)"
          class="list-group-item list-group-item-action flex-column align-items-start {{ notif.is_read==0 ? 'unread' : ''}}"
          *ngIf="notif.type=='reblog'">
          <div class="notif-item">
            <span class="avatar avatar-sm rounded-circle align-items-center">
              <a [routerLink]="['/profile/','@'+notif.sender]">
                <img alt="Image placeholder" src="{{ notif.sender_metadata.author_profile_pic }}"
                  onError="this.src='assets/avatars/AVATAR.svg'" width="40" height="40" />
              </a>
            </span>
            <div class="media-body">
              <span class="username font-weight-bold"
                [routerLink]="['/profile/','@'+notif.sender]">{{ notif.sender_metadata.author_name | lettercase:'ucfirst' }}</span>
              <span class="recent-say"> resteemed your post</span>
              <span class="text-sm text-primary" href="#"> {{ notif.url }}</span>
              <br />
              <span class="timestamp_hours" data-toggle="tooltip" data-placement="top" title="{{ notif.created }}">
                <i class="fa fa-retweet"></i>
                <small class="timeago"> {{ notif.date | timeago:live }}</small></span>
            </div>
          </div>
        </a>

        <!--Notification for Replies-->
        <a (click)="markAsRead(notif)"
          class="list-group-item list-group-item-action flex-column align-items-start {{ notif.is_read==0 ? 'unread' : ''}}"
          *ngIf="notif.type=='reply'">
          <div class="notif-item">
            <span class="avatar avatar-sm rounded-circle align-items-center">
              <a [routerLink]="['/profile/','@'+notif.sender]">
                <img alt="Image placeholder" src="{{ notif.sender_metadata.author_profile_pic }}"
                  onError="this.src='assets/avatars/AVATAR.svg'" width="40" height="40" />
              </a>
            </span>
            <div class="media-body">
              <span class="username font-weight-bold" [routerLink]="['/profile/','@'+notif.sender]">
                {{ notif.sender_metadata.author_name | lettercase:'ucfirst' }} </span>
              <span class="recent-say">replied to your post</span>
              <span class="text-sm text-primary"> {{ notif.url }}</span> <br />
              <span class="timestamp_hours" data-toggle="tooltip" data-placement="top" title="{{ notif.created }}">
                <i class="fa fa-comment"></i>
                <small class="timeago"> {{ notif.date | timeago:live }}</small></span>
            </div>
          </div>
        </a>

        <!--Notification for Comments-->
        <a (click)="markAsRead(notif)"
          class="list-group-item list-group-item-action flex-column align-items-start {{ notif.is_read==0 ? 'unread' : ''}}"
          *ngIf="notif.type=='reply_comment'">
          <div class="notif-item">
            <span class="avatar avatar-sm rounded-circle align-items-center">
              <a [routerLink]="['/profile/','@'+notif.sender]">
                <img alt="Image placeholder" src="{{ notif.sender_metadata.author_profile_pic }}"
                  onError="this.src='assets/avatars/AVATAR.svg'" width="40" height="40" />
              </a>
            </span>
            <div class="media-body">
              <span class="username font-weight-bold"
                [routerLink]="['/profile/','@'+notif.sender]">{{ notif.sender_metadata.author_name | lettercase:'ucfirst' }}</span>
              <span class="recent-say"> commented to your post</span>
              <span class="text-sm text-primary" href="#"> {{ notif.url }}</span>
              <br />
              <span class="timestamp_hours" data-toggle="tooltip" data-placement="top" title="{{ notif.created }}">
                <i class="fa fa-comment"></i>
                <small class="timeago"> {{ notif.date | timeago:live }}</small></span>
            </div>
          </div>
        </a>

        <a (click)="markAsRead(notif)"
          class="list-group-item list-group-item-action flex-column align-items-start {{ notif.is_read==0 ? 'unread' : ''}}"
          *ngIf="notif.type=='mention'">
          <div class="notif-item">
            <span class="avatar avatar-sm rounded-circle align-items-center">
              <a [routerLink]="['/profile/','@'+notif.sender]">
                <img alt="Image placeholder" src="{{ notif.sender_metadata.author_profile_pic }}"
                  onError="this.src='assets/avatars/AVATAR.svg'" width="40" height="40" />
              </a>
            </span>
            <div class="media-body">
              <span class="username font-weight-bold"
                [routerLink]="['/profile/','@'+notif.sender]">{{ notif.sender_metadata.author_name | lettercase:'ucfirst' }}</span>
              <span class="recent-say"> mentioned you from this post</span>
              <span class="text-sm text-primary" href="#"> {{ notif.url }}</span>
              <br />
              <span class="timestamp_hours" data-toggle="tooltip" data-placement="top" title="{{ notif.created }}">
                <i class="fa fa-comment"></i>
                <small class="timeago"> {{ notif.date | timeago:live }}</small></span>
            </div>
          </div>
        </a>

        <!--Notification for Upvote-->
        <a (click)="markAsRead(notif)"
          class="list-group-item list-group-item-action flex-column align-items-start {{ notif.is_read==0 ? 'unread' : ''}}"
          *ngIf="notif.type=='vote'">
          <div class="notif-item">
            <span class="avatar avatar-sm rounded-circle align-items-center">
              <a [routerLink]="['/profile/','@'+notif.sender]">
                <img alt="Image placeholder" src="{{ notif.sender_metadata.author_profile_pic }}"
                  onError="this.src='assets/avatars/AVATAR.svg'" width="40" height="40" />
              </a>
            </span>
            <div class="media-body">
              <span class="username font-weight-bold" [routerLink]="['/profile/','@'+notif.sender]">
                {{ notif.sender_metadata.author_name | lettercase:'ucfirst' }} </span>
              <span class="recent-say"> upvoted your post</span>
              <span class="text-sm text-primary" href="#"> {{ notif.url }}</span>
              <br />
              <span class="timestamp_hours" data-toggle="tooltip" data-placement="top" title="{{ notif.created }}">
                <i class="fa fa-heart"></i>
                <small class="timeago"> {{ notif.date | timeago:live }}</small></span>
            </div>
          </div>
        </a>
      </div>
    </div>
  </div>
  <div style="text-align: center;" class="mt-3 mb-2">
    <span *ngIf="fetching && !fetched_all">Loading...<i class="fa fa-refresh fa-spin"></i></span>
    <span *ngIf="!fetching && notifs.length == 0">No notifications yet</span>
  </div>
  <br/>
</main>